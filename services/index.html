
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../entities/diagnostics/">
      
      
        <link rel="next" href="../events/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Services - Home Assistant Octopus Energy</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#services" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Home Assistant Octopus Energy" class="md-header__button md-logo" aria-label="Home Assistant Octopus Energy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Home Assistant Octopus Energy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Services
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/bottlecapdave/homeassistant-octopusenergy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Home Assistant Octopus Energy" class="md-nav__button md-logo" aria-label="Home Assistant Octopus Energy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Home Assistant Octopus Energy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/bottlecapdave/homeassistant-octopusenergy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/target_rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Target Rate Sensor(s)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/rolling_target_rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rolling Target Rate Sensor(s)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/cost_tracker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cost Tracker Sensor(s)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/tariff_comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tariff Comparison
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/energy_dashboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Energy Dashboard
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Entities
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Entities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/electricity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Electricity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/gas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/octoplus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Octoplus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/intelligent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intelligent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/wheel_of_fortune/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wheel Of Fortune
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/greenness_forecast/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Greenness Forecast
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/home_pro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home Pro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/heat_pump/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Heat Pump
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/diagnostics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diagnostics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Services
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Services
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#octopus_energypurge_invalid_external_statistic_ids" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.purge_invalid_external_statistic_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyrefresh_previous_consumption_data" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.refresh_previous_consumption_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyupdate_target_config" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.update_target_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.update_target_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyupdate_rolling_target_config" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.update_rolling_target_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.update_rolling_target_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyjoin_octoplus_saving_session_event" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.join_octoplus_saving_session_event
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.join_octoplus_saving_session_event">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyspin_wheel_of_fortune" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.spin_wheel_of_fortune
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.spin_wheel_of_fortune">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_3" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyredeem_octoplus_points_into_account_credit" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.redeem_octoplus_points_into_account_credit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.redeem_octoplus_points_into_account_credit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_4" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyupdate_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.update_cost_tracker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.update_cost_tracker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_5" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyreset_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.reset_cost_tracker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyadjust_accumulative_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.adjust_accumulative_cost_tracker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyadjust_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.adjust_cost_tracker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyregister_rate_weightings" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.register_rate_weightings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.register_rate_weightings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_6" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyboost_heat_pump_zone" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.boost_heat_pump_zone
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyset_heat_pump_flow_temp_config" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.set_heat_pump_flow_temp_config
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Repairs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Repairs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repairs/account_not_found/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Account not found
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repairs/invalid_target_rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Invalid Target Rate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repairs/octopus_mini_not_valid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Octopus Mini not valid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repairs/unknown_product/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Unknown product
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repairs/cost_override_obsolete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Cost override deprecated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../repairs/unknown_intelligent_provider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Repairs - Unknown intelligent provider
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../blueprints/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blueprints
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sponsorship/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sponsorship
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#octopus_energypurge_invalid_external_statistic_ids" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.purge_invalid_external_statistic_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyrefresh_previous_consumption_data" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.refresh_previous_consumption_data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyupdate_target_config" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.update_target_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.update_target_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyupdate_rolling_target_config" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.update_rolling_target_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.update_rolling_target_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyjoin_octoplus_saving_session_event" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.join_octoplus_saving_session_event
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.join_octoplus_saving_session_event">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyspin_wheel_of_fortune" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.spin_wheel_of_fortune
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.spin_wheel_of_fortune">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_3" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyredeem_octoplus_points_into_account_credit" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.redeem_octoplus_points_into_account_credit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.redeem_octoplus_points_into_account_credit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_4" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyupdate_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.update_cost_tracker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.update_cost_tracker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_5" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyreset_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.reset_cost_tracker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyadjust_accumulative_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.adjust_accumulative_cost_tracker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyadjust_cost_tracker" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.adjust_cost_tracker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyregister_rate_weightings" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.register_rate_weightings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="octopus_energy.register_rate_weightings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automation-example_6" class="md-nav__link">
    <span class="md-ellipsis">
      Automation Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyboost_heat_pump_zone" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.boost_heat_pump_zone
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#octopus_energyset_heat_pump_flow_temp_config" class="md-nav__link">
    <span class="md-ellipsis">
      octopus_energy.set_heat_pump_flow_temp_config
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="services">Services<a class="headerlink" href="#services" title="Permanent link">#</a></h1>
<p>There are a few services available within this integration, which are detailed here.</p>
<h2 id="octopus_energypurge_invalid_external_statistic_ids">octopus_energy.purge_invalid_external_statistic_ids<a class="headerlink" href="#octopus_energypurge_invalid_external_statistic_ids" title="Permanent link">#</a></h2>
<p>For removing all external statistics that are associated with meters that don't have an active tariff. This is useful if you've been using the integration and obtained new smart meters.</p>
<h2 id="octopus_energyrefresh_previous_consumption_data">octopus_energy.refresh_previous_consumption_data<a class="headerlink" href="#octopus_energyrefresh_previous_consumption_data" title="Permanent link">#</a></h2>
<p>For refreshing the consumption/cost information for a given previous consumption entity. This is useful when you've just installed the integration and want old data brought in or a previous consumption sensor fails to import (e.g. data becomes available outside of the configured offset). The service will raise a notification when the refreshing starts and finishes.</p>
<p>This service is only available for the following sensors</p>
<ul>
<li><code>sensor.octopus_energy_electricity_{{METER_SERIAL_NUMBER}}_{{MPAN_NUMBER}}_previous_accumulative_consumption</code> (this will populate both consumption and cost)</li>
<li><code>sensor.octopus_energy_gas_{{METER_SERIAL_NUMBER}}_{{MPRN_NUMBER}}_previous_accumulative_consumption_m3</code> (this will populate both consumption and cost for both m3 and kwh)</li>
</ul>
<h2 id="octopus_energyupdate_target_config">octopus_energy.update_target_config<a class="headerlink" href="#octopus_energyupdate_target_config" title="Permanent link">#</a></h2>
<p>For updating a given <a href="../setup/target_rate/">target rate's</a> config. This allows you to change target rates sensors dynamically based on other outside criteria (e.g. you need to adjust the target hours to top up home batteries).</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the target sensor whose configuration is to be updated.</td>
</tr>
<tr>
<td><code>data.target_hours</code></td>
<td><code>yes</code></td>
<td>The optional number of hours the target rate sensor should come on during a 24 hour period. Must be divisible by 0.5.</td>
</tr>
<tr>
<td><code>data.target_start_time</code></td>
<td><code>yes</code></td>
<td>The optional time the evaluation period should start. Must be in the format of <code>HH:MM</code>.</td>
</tr>
<tr>
<td><code>data.target_end_time</code></td>
<td><code>yes</code></td>
<td>The optional time the evaluation period should end. Must be in the format of <code>HH:MM</code>.</td>
</tr>
<tr>
<td><code>data.target_offset</code></td>
<td><code>yes</code></td>
<td>The optional offset to apply to the target rate when it starts. Must be in the format <code>(+/-)HH:MM:SS</code>.</td>
</tr>
<tr>
<td><code>data.target_minimum_rate</code></td>
<td><code>yes</code></td>
<td>The optional minimum rate the selected rates should not go below.</td>
</tr>
<tr>
<td><code>data.target_maximum_rate</code></td>
<td><code>yes</code></td>
<td>The optional maximum rate the selected rates should not go above.</td>
</tr>
<tr>
<td><code>data.target_weighting</code></td>
<td><code>yes</code></td>
<td>The optional weighting that should be applied to the selected rates.</td>
</tr>
<tr>
<td><code>data.persist_changes</code></td>
<td><code>yes</code></td>
<td>Determines if the changes should be persisted to the original configuration or should be temporary and reset upon integration reload. If not supplied, then the changes are temporary</td>
</tr>
</tbody>
</table>
<h3 id="automation-example">Automation Example<a class="headerlink" href="#automation-example" title="Permanent link">#</a></h3>
<p>This can be used via automations in the following way. Assuming we have the following inputs.</p>
<div class="highlight"><pre><span></span><code><span class="nt">input_number</span><span class="p">:</span>
<span class="w">  </span><span class="nt">octopus_energy_target_hours</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Target Hours</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span>

<span class="nt">input_text</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># From/to would ideally use input_datetime, but we need the time in a different format</span>
<span class="w">  </span><span class="nt">octopus_energy_target_from</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Target From</span>
<span class="w">    </span><span class="nt">initial</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;00:00&quot;</span>
<span class="w">  </span><span class="nt">octopus_energy_target_to</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Target To</span>
<span class="w">    </span><span class="nt">initial</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;00:00&quot;</span>
<span class="w">  </span><span class="nt">octopus_energy_target_offset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Target Offset</span>
<span class="w">    </span><span class="nt">initial</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-00:00:00&quot;</span>
</code></pre></div>
<p>Then an automation might look like the following</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">single</span>
<span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update target rate config</span>
<span class="nt">trigger</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">state</span>
<span class="w">    </span><span class="nt">entity_id</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_number.octopus_energy_target_hours</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_text.octopus_energy_target_from</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_text.octopus_energy_target_to</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_text.octopus_energy_target_offset</span>
<span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">action</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">octopus_energy.update_target_config</span>
<span class="w">    </span><span class="nt">data</span><span class="p">:</span>
<span class="w">      </span><span class="nt">target_hours</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">&quot;{{ states(&#39;input_number.octopus_energy_target_hours&#39;) | string }}&quot;</span>
<span class="w">      </span><span class="nt">target_start_time</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">{{ states(&#39;input_text.octopus_energy_target_from&#39;) }}</span>
<span class="w">      </span><span class="nt">target_end_time</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">{{ states(&#39;input_text.octopus_energy_target_to&#39;) }}</span>
<span class="w">      </span><span class="nt">target_offset</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">{{ states(&#39;input_text.octopus_energy_target_offset&#39;) }}</span>
<span class="w">    </span><span class="nt">target</span><span class="p">:</span>
<span class="w">      </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">binary_sensor.octopus_energy_target_example</span>
</code></pre></div>
<h2 id="octopus_energyupdate_rolling_target_config">octopus_energy.update_rolling_target_config<a class="headerlink" href="#octopus_energyupdate_rolling_target_config" title="Permanent link">#</a></h2>
<p>For updating a given <a href="../setup/rolling_target_rate/">rolling target rate's</a> config. This allows you to change rolling target rates sensors dynamically based on other outside criteria (e.g. you need to adjust the target hours to top up home batteries).</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the target sensor whose configuration is to be updated.</td>
</tr>
<tr>
<td><code>data.target_hours</code></td>
<td><code>yes</code></td>
<td>The optional number of hours the target rate sensor should come on during a 24 hour period. Must be divisible by 0.5.</td>
</tr>
<tr>
<td><code>data.target_look_ahead_hours</code></td>
<td><code>yes</code></td>
<td>The optional number of hours worth of rates the sensor should look at for the evaluation period.</td>
</tr>
<tr>
<td><code>data.target_offset</code></td>
<td><code>yes</code></td>
<td>The optional offset to apply to the target rate when it starts. Must be in the format <code>(+/-)HH:MM:SS</code>.</td>
</tr>
<tr>
<td><code>data.target_minimum_rate</code></td>
<td><code>yes</code></td>
<td>The optional minimum rate the selected rates should not go below.</td>
</tr>
<tr>
<td><code>data.target_maximum_rate</code></td>
<td><code>yes</code></td>
<td>The optional maximum rate the selected rates should not go above.</td>
</tr>
<tr>
<td><code>data.target_weighting</code></td>
<td><code>yes</code></td>
<td>The optional weighting that should be applied to the selected rates.</td>
</tr>
<tr>
<td><code>data.persist_changes</code></td>
<td><code>yes</code></td>
<td>Determines if the changes should be persisted to the original configuration or should be temporary and reset upon integration reload. If not supplied, then the changes are temporary</td>
</tr>
</tbody>
</table>
<h3 id="automation-example_1">Automation Example<a class="headerlink" href="#automation-example_1" title="Permanent link">#</a></h3>
<p>This can be used via automations in the following way. Assuming we have the following inputs.</p>
<div class="highlight"><pre><span></span><code><span class="nt">input_number</span><span class="p">:</span>
<span class="w">  </span><span class="nt">octopus_energy_rolling_target_hours</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Rolling Target Hours</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span>
<span class="w">  </span><span class="nt">octopus_energy_rolling_target_look_ahead_hours</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Rolling Target Look Ahead Hours</span>
<span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24</span>

<span class="nt">input_text</span><span class="p">:</span>
<span class="w">  </span><span class="nt">octopus_energy_target_offset</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Octopus Energy Target Offset</span>
<span class="w">    </span><span class="nt">initial</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-00:00:00&quot;</span>
</code></pre></div>
<p>Then an automation might look like the following</p>
<div class="highlight"><pre><span></span><code><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">single</span>
<span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update target rate config</span>
<span class="nt">trigger</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">state</span>
<span class="w">    </span><span class="nt">entity_id</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_number.octopus_energy_rolling_target_hours</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_number.octopus_energy_rolling_target_look_ahead_hours</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">input_text.octopus_energy_target_offset</span>
<span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="nt">action</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">octopus_energy.update_target_config</span>
<span class="w">    </span><span class="nt">data</span><span class="p">:</span>
<span class="w">      </span><span class="nt">target_hours</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">&quot;{{ states(&#39;input_number.octopus_energy_target_hours&#39;) | string }}&quot;</span>
<span class="w">      </span><span class="nt">target_look_ahead_hours</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">&quot;{{ states(&#39;input_number.octopus_energy_rolling_target_look_ahead_hours&#39;) | string }}&quot;</span>
<span class="w">      </span><span class="nt">target_offset</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">{{ states(&#39;input_text.octopus_energy_target_offset&#39;) }}</span>
<span class="w">    </span><span class="nt">target</span><span class="p">:</span>
<span class="w">      </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">binary_sensor.octopus_energy_rolling_target_example</span>
</code></pre></div>
<h2 id="octopus_energyjoin_octoplus_saving_session_event">octopus_energy.join_octoplus_saving_session_event<a class="headerlink" href="#octopus_energyjoin_octoplus_saving_session_event" title="Permanent link">#</a></h2>
<p>Service for joining a new saving session event. When used, it may take a couple of minutes for the other sensors to refresh the changes.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the target sensor whose configuration is to be updated. This should always point at the <a href="../entities/octoplus/#saving-session-events">saving session events</a> entity.</td>
</tr>
<tr>
<td><code>data.event_code</code></td>
<td><code>no</code></td>
<td>The code of the event to join</td>
</tr>
</tbody>
</table>
<h3 id="automation-example_2">Automation Example<a class="headerlink" href="#automation-example_2" title="Permanent link">#</a></h3>
<p>For an automation example, please refer to the available <a href="../blueprints/#automatically-join-saving-sessions">blueprint</a>.</p>
<h2 id="octopus_energyspin_wheel_of_fortune">octopus_energy.spin_wheel_of_fortune<a class="headerlink" href="#octopus_energyspin_wheel_of_fortune" title="Permanent link">#</a></h2>
<p>This service allows the user to perform a spin on the <a href="../entities/wheel_of_fortune/">wheel of fortune</a> that is awarded to users every month. No point letting them go to waste :)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to an ongoing issue with the underlying API, this will not award octopoints if used. If you are on Octoplus, it is advised not to use this service.</p>
</div>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the wheel of fortune sensor that represents the type of spin to be made. This should always point at one of the <a href="../entities/wheel_of_fortune/">wheel of fortune sensors</a> entities.</td>
</tr>
</tbody>
</table>
<h3 id="automation-example_3">Automation Example<a class="headerlink" href="#automation-example_3" title="Permanent link">#</a></h3>
<p>For automation examples, please refer to the available <a href="../blueprints/#wheel-of-fortune">blueprints</a>.</p>
<h2 id="octopus_energyredeem_octoplus_points_into_account_credit">octopus_energy.redeem_octoplus_points_into_account_credit<a class="headerlink" href="#octopus_energyredeem_octoplus_points_into_account_credit" title="Permanent link">#</a></h2>
<p>Allows you to redeem a certain number of of Octoplus points and convert them into account credit.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This service is only available if you have signed up to Octoplus</p>
</div>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the Octoplus points that hold the points to be redeemed. This should always point at one of the <a href="../entities/octoplus/#octoplus-points">octoplus points sensor</a> entities.</td>
</tr>
<tr>
<td><code>data.points_to_redeem</code></td>
<td><code>no</code></td>
<td>The number of points to redeem.</td>
</tr>
</tbody>
</table>
<h3 id="automation-example_4">Automation Example<a class="headerlink" href="#automation-example_4" title="Permanent link">#</a></h3>
<p>For automation examples, please refer to the available <a href="../blueprints/#automatically-redeem-octoplus-points-for-account-credit">blueprints</a>.</p>
<h2 id="octopus_energyupdate_cost_tracker">octopus_energy.update_cost_tracker<a class="headerlink" href="#octopus_energyupdate_cost_tracker" title="Permanent link">#</a></h2>
<p>This service allows the user to turn the tracking on/off for a given <a href="../setup/cost_tracker/">cost tracker</a> sensor.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the cost tracker sensor(s) whose configuration is to be updated.</td>
</tr>
<tr>
<td><code>data.is_tracking_enabled</code></td>
<td><code>no</code></td>
<td>Determines if tracking should be enabled (true) or disabled (false) for the specified cost trackers</td>
</tr>
</tbody>
</table>
<h3 id="automation-example_5">Automation Example<a class="headerlink" href="#automation-example_5" title="Permanent link">#</a></h3>
<p>For automation examples, please refer to the available <a href="../blueprints/#cost-tracker">blueprints</a>.</p>
<h2 id="octopus_energyreset_cost_tracker">octopus_energy.reset_cost_tracker<a class="headerlink" href="#octopus_energyreset_cost_tracker" title="Permanent link">#</a></h2>
<p>Resets a given <a href="../setup/cost_tracker/">cost tracker</a> sensor back to zero before it's normal reset time.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the cost tracker sensor(s) that should be reset.</td>
</tr>
</tbody>
</table>
<h2 id="octopus_energyadjust_accumulative_cost_tracker">octopus_energy.adjust_accumulative_cost_tracker<a class="headerlink" href="#octopus_energyadjust_accumulative_cost_tracker" title="Permanent link">#</a></h2>
<p>Allows you to adjust the cost/consumption for any given date recorded by an accumulative <a href="../setup/cost_tracker/">cost tracker</a> sensor (e.g. week or month).</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the cost tracker sensor(s) that should be updated (e.g. <code>sensor.octopus_energy_cost_tracker_{{COST_TRACKER_NAME}}_week</code> or <code>sensor.octopus_energy_cost_tracker_{{COST_TRACKER_NAME}}_month</code>).</td>
</tr>
<tr>
<td><code>data.date</code></td>
<td><code>no</code></td>
<td>The date of the data within the cost tracker to be adjusted.</td>
</tr>
<tr>
<td><code>data.consumption</code></td>
<td><code>no</code></td>
<td>The new consumption recorded against the specified date.</td>
</tr>
<tr>
<td><code>data.cost</code></td>
<td><code>no</code></td>
<td>The new cost recorded against the specified date.</td>
</tr>
</tbody>
</table>
<h2 id="octopus_energyadjust_cost_tracker">octopus_energy.adjust_cost_tracker<a class="headerlink" href="#octopus_energyadjust_cost_tracker" title="Permanent link">#</a></h2>
<p>Allows you to adjust the consumption for any given period recorded by a <a href="../setup/cost_tracker/">cost tracker</a> sensor representing today.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the cost tracker sensor(s) that should be updated (e.g. <code>sensor.octopus_energy_cost_tracker_{{COST_TRACKER_NAME}}</code>).</td>
</tr>
<tr>
<td><code>data.date</code></td>
<td><code>no</code></td>
<td>The date of the data within the cost tracker to be adjusted.</td>
</tr>
<tr>
<td><code>data.consumption</code></td>
<td><code>no</code></td>
<td>The new consumption recorded against the specified date.</td>
</tr>
</tbody>
</table>
<h2 id="octopus_energyregister_rate_weightings">octopus_energy.register_rate_weightings<a class="headerlink" href="#octopus_energyregister_rate_weightings" title="Permanent link">#</a></h2>
<p>Allows you to configure weightings against rates at given times using factors external to the integration. These are applied when calculating <a href="../setup/target_rate/#external-rate-weightings">target rates</a> or <a href="../setup/rolling_target_rate/#external-rate-weightings">rolling target rates</a>.</p>
<p>Rate weightings are added to any existing rate weightings that have been previously configured. Any rate weightings that are more than 24 hours old are removed. Any rate weightings for periods that have been previously configured are overridden. </p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the electricity current rate sensor for the rates the weighting should be applied to (e.g. <code>sensor.octopus_energy_electricity_{{METER_SERIAL_NUMBER}}_{{MPAN_NUMBER}}_current_rate</code>).</td>
</tr>
<tr>
<td><code>data.weightings</code></td>
<td><code>no</code></td>
<td>The collection of weightings to add. Each item in the array should represent a given 30 minute period. Example array is <code>[{ "start": "2025-01-01T00:00:00Z", "end": "2025-01-01T00:30:00Z", "weighting": 0.1 }]</code></td>
</tr>
</tbody>
</table>
<h3 id="automation-example_6">Automation Example<a class="headerlink" href="#automation-example_6" title="Permanent link">#</a></h3>
<p>This automation adds weightings based on the national grids carbon intensity, as provided by <a href="https://github.com/BottlecapDave/HomeAssistant-CarbonIntensity">Carbon Intensity</a>.</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Carbon Intensity Rate Weightings</span>
<span class="w">  </span><span class="nt">triggers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">state</span>
<span class="w">    </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">event.carbon_intensity_national_current_day_rates</span>
<span class="w">  </span><span class="nt">actions</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">octopus_energy.register_rate_weightings</span>
<span class="w">    </span><span class="nt">target</span><span class="p">:</span>
<span class="w">      </span><span class="nt">entity_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sensor.octopus_energy_electricity_xxx_xxx_current_rate</span>
<span class="w">    </span><span class="nt">data</span><span class="p">:</span>
<span class="w">      </span><span class="nt">weightings</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span>
<span class="w">        </span><span class="no">{% set forecast = state_attr(&#39;event.carbon_intensity_national_current_day_rates&#39;, &#39;rates&#39;) + state_attr(&#39;event.carbon_intensity_national_next_day_rates&#39;, &#39;rates&#39;) %}</span>
<span class="w">        </span><span class="no">{% set ns = namespace(list = [])  %}   {%- for a in forecast -%} </span>
<span class="w">          </span><span class="no">{%- set ns.list = ns.list + [{ &quot;start&quot;: a.from.strftime(&#39;%Y-%m-%dT%H:%M:%SZ&#39;), &quot;end&quot;: a.to.strftime(&#39;%Y-%m-%dT%H:%M:%SZ&#39;), &quot;weighting&quot;: a.intensity_forecast | float }] -%} </span>
<span class="w">        </span><span class="no">{%- endfor -%} {{ ns.list }}</span>
</code></pre></div>
<h2 id="octopus_energyboost_heat_pump_zone">octopus_energy.boost_heat_pump_zone<a class="headerlink" href="#octopus_energyboost_heat_pump_zone" title="Permanent link">#</a></h2>
<p>Allows you to boost a given heat pump zone for a set amount of time.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>The name of the heat pump zone boost mode should be applied to (e.g. <code>climate.octopus_energy_heat_pump_{{HEAT_PUMP_ID}}_{{ZONE_CODE}}</code>).</td>
</tr>
<tr>
<td><code>data.hours</code></td>
<td><code>no</code></td>
<td>The number of hours to turn boost mode on for. This can be between 0 and 12.</td>
</tr>
<tr>
<td><code>data.minutes</code></td>
<td><code>no</code></td>
<td>The number of minutes to turn boost mode on for. This can be 0, 15, or 45.</td>
</tr>
<tr>
<td><code>data.target_temperature</code></td>
<td><code>yes</code></td>
<td>The optional target temperature to boost to. If not supplied, then the current target temperature will be used.</td>
</tr>
</tbody>
</table>
<h2 id="octopus_energyset_heat_pump_flow_temp_config">octopus_energy.set_heat_pump_flow_temp_config<a class="headerlink" href="#octopus_energyset_heat_pump_flow_temp_config" title="Permanent link">#</a></h2>
<p>Allows you to set the heat pump configuration for fixed and weather compensated flow temperatures, with the option to select which is active.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Changing this configuration without a good understanding of heat loss and emitter output can cause cycling, defrosting, or incorrect heat delivery. </p>
</div>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Optional</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target.entity_id</code></td>
<td><code>no</code></td>
<td>Any climate entity belonging to the heat pump which the configuration should be applied to (e.g. <code>climate.octopus_energy_heat_pump_{{HEAT_PUMP_ID}}_{{ZONE_CODE}}</code>).</td>
</tr>
<tr>
<td><code>data.weather_comp_enabled</code></td>
<td><code>no</code></td>
<td>Switches weather compensation on or off.</td>
</tr>
<tr>
<td><code>data.weather_comp_min_temperature</code></td>
<td><code>no</code></td>
<td>Minimum allowable temperature for weather compensation, typically no lower than 30.</td>
</tr>
<tr>
<td><code>data.weather_comp_max_temperature</code></td>
<td><code>no</code></td>
<td>Maximum allowable temperature for weather compensation, typically no higher than 70.</td>
</tr>
<tr>
<td><code>data.fixed_flow_temperature</code></td>
<td><code>no</code></td>
<td>If a fixed flow temperature is enabled this value will be used, typically between 30 and 70.</td>
</tr>
</tbody>
</table>








  <aside class="md-source-file">
    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"/></svg>
      
    </span>
    <nav>
      BottlecapDave, Geoffrey Coan, Sam Reed
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "search.suggest", "search.highlight", "toc.follow"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>